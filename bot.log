2025-12-01 05:52:10,137 - __main__ - INFO - ‚úÖ Configuration validated
2025-12-01 05:52:10,149 - __main__ - INFO - ‚úÖ Middlewares registered
2025-12-01 05:52:10,149 - __main__ - INFO - ‚úÖ Routers registered
2025-12-01 05:52:10,151 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 05:52:10,151 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 05:52:10,151 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 05:52:10,152 - apscheduler.scheduler - INFO - Added job "Send daily event digest to photographer" to job store "default"
2025-12-01 05:52:10,152 - apscheduler.scheduler - INFO - Added job "Send 24-hour event reminders" to job store "default"
2025-12-01 05:52:10,152 - apscheduler.scheduler - INFO - Added job "Send 1-hour event reminders" to job store "default"
2025-12-01 05:52:10,152 - apscheduler.scheduler - INFO - Scheduler started
2025-12-01 05:52:10,152 - bot.services.scheduler - INFO - ‚úÖ Reminder scheduler started successfully
2025-12-01 05:52:10,153 - __main__ - INFO - üîÑ Starting polling...
2025-12-01 05:52:10,153 - __main__ - INFO - üöÄ Starting University Event Bot...
2025-12-01 05:52:10,162 - __main__ - INFO - ‚úÖ Database initialized
2025-12-01 05:52:12,919 - __main__ - INFO - ‚úÖ Startup notification sent to photographer
2025-12-01 05:52:12,919 - __main__ - INFO - ‚úÖ Bot started successfully
2025-12-01 05:52:12,919 - aiogram.dispatcher - INFO - Start polling
2025-12-01 05:52:13,817 - aiogram.dispatcher - INFO - Run polling for bot @tiu_event_bot id=8283774586 - 'Event Orginizer'
2025-12-01 05:52:30,221 - aiogram.event - INFO - Update id=409625639 is handled. Duration 5789 ms by bot id=8283774586
2025-12-01 05:52:51,511 - aiogram.event - INFO - Update id=409625640 is not handled. Duration 2525 ms by bot id=8283774586
2025-12-01 05:52:51,512 - aiogram.event - ERROR - Cause exception while process update id=409625640 by bot id=8283774586
TelegramBadRequest: Telegram server says - Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 342
Traceback (most recent call last):
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 27, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/fsm/middleware.py", line 41, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 123, in _wrapped
    return await self._propagate_event(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 123, in _wrapped
    return await self._propagate_event(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/middlewares/admin.py", line 27, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/handlers/common.py", line 55, in cmd_help
    await message.answer(help_text)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/methods/base.py", line 84, in emit
    return await bot(self)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/client/bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/client/session/aiohttp.py", line 178, in make_request
    response = self.check_response(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/client/session/base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 342
2025-12-01 05:53:19,590 - aiogram.event - INFO - Update id=409625641 is handled. Duration 7382 ms by bot id=8283774586
2025-12-01 05:53:34,453 - aiogram.event - INFO - Update id=409625642 is handled. Duration 1859 ms by bot id=8283774586
2025-12-01 05:53:48,448 - aiogram.event - INFO - Update id=409625643 is handled. Duration 512 ms by bot id=8283774586
2025-12-01 05:54:05,755 - aiogram.event - INFO - Update id=409625644 is handled. Duration 5016 ms by bot id=8283774586
2025-12-01 05:54:28,403 - aiogram.event - INFO - Update id=409625645 is not handled. Duration 2748 ms by bot id=8283774586
2025-12-01 05:54:28,404 - aiogram.event - ERROR - Cause exception while process update id=409625645 by bot id=8283774586
TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Network is unreachable]
Traceback (most recent call last):
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiohttp/connector.py", line 1025, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 1056, in create_connection
    raise exceptions[0]
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 1041, in create_connection
    sock = await self._connect_sock(
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 955, in _connect_sock
    await self.sock_connect(sock, address)
  File "/usr/local/lib/python3.9/asyncio/selector_events.py", line 502, in sock_connect
    return await fut
  File "/usr/local/lib/python3.9/asyncio/selector_events.py", line 507, in _sock_connect
    sock.connect(address)
OSError: [Errno 101] Network is unreachable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/client/session/aiohttp.py", line 170, in make_request
    async with session.post(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiohttp/client.py", line 1197, in __aenter__
    self._resp = await self._coro
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiohttp/client.py", line 581, in _request
    conn = await self._connector.connect(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiohttp/connector.py", line 544, in connect
    proto = await self._create_connection(req, traces, timeout)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiohttp/connector.py", line 944, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiohttp/connector.py", line 1257, in _create_direct_connection
    raise last_exc
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiohttp/connector.py", line 1226, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiohttp/connector.py", line 1033, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Network is unreachable]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 27, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/fsm/middleware.py", line 41, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 123, in _wrapped
    return await self._propagate_event(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 123, in _wrapped
    return await self._propagate_event(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/middlewares/admin.py", line 27, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/handlers/user.py", line 116, in process_location
    await message.answer(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/methods/base.py", line 84, in emit
    return await bot(self)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/client/bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/client/session/aiohttp.py", line 177, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Network is unreachable]
2025-12-01 05:55:17,317 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-12-01 05:55:17,318 - aiogram.dispatcher - INFO - Polling stopped for bot @tiu_event_bot id=8283774586 - 'Event Orginizer'
2025-12-01 05:55:17,337 - aiogram.dispatcher - INFO - Polling stopped
2025-12-01 05:55:17,337 - __main__ - INFO - üõë Shutting down bot...
2025-12-01 05:55:17,337 - bot.services.scheduler - INFO - üõë Reminder scheduler stopped
2025-12-01 05:55:17,338 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-12-01 05:55:21,278 - __main__ - INFO - ‚úÖ Shutdown notification sent
2025-12-01 05:55:21,278 - __main__ - INFO - ‚úÖ Bot stopped successfully
2025-12-01 05:55:21,379 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-12-01 05:55:21,529 - __main__ - INFO - ‚úÖ Bot session closed
2025-12-01 05:55:33,238 - __main__ - INFO - ‚úÖ Configuration validated
2025-12-01 05:55:33,250 - __main__ - INFO - ‚úÖ Middlewares registered
2025-12-01 05:55:33,251 - __main__ - INFO - ‚úÖ Routers registered
2025-12-01 05:55:33,252 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 05:55:33,252 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 05:55:33,252 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 05:55:33,253 - apscheduler.scheduler - INFO - Added job "Send daily event digest to photographer" to job store "default"
2025-12-01 05:55:33,253 - apscheduler.scheduler - INFO - Added job "Send 24-hour event reminders" to job store "default"
2025-12-01 05:55:33,253 - apscheduler.scheduler - INFO - Added job "Send 1-hour event reminders" to job store "default"
2025-12-01 05:55:33,253 - apscheduler.scheduler - INFO - Scheduler started
2025-12-01 05:55:33,254 - bot.services.scheduler - INFO - ‚úÖ Reminder scheduler started successfully
2025-12-01 05:55:33,254 - __main__ - INFO - üîÑ Starting polling...
2025-12-01 05:55:33,254 - __main__ - INFO - üöÄ Starting University Event Bot...
2025-12-01 05:55:33,258 - __main__ - INFO - ‚úÖ Database initialized
2025-12-01 05:55:36,571 - __main__ - INFO - ‚úÖ Startup notification sent to photographer
2025-12-01 05:55:36,572 - __main__ - INFO - ‚úÖ Bot started successfully
2025-12-01 05:55:36,572 - aiogram.dispatcher - INFO - Start polling
2025-12-01 05:55:37,051 - aiogram.dispatcher - INFO - Run polling for bot @tiu_event_bot id=8283774586 - 'Event Orginizer'
2025-12-01 05:56:01,418 - aiogram.event - INFO - Update id=409625646 is handled. Duration 2550 ms by bot id=8283774586
2025-12-01 05:56:04,071 - aiogram.event - INFO - Update id=409625647 is handled. Duration 894 ms by bot id=8283774586
2025-12-01 05:56:16,139 - aiogram.event - INFO - Update id=409625648 is handled. Duration 632 ms by bot id=8283774586
2025-12-01 05:56:29,951 - aiogram.event - INFO - Update id=409625649 is handled. Duration 625 ms by bot id=8283774586
2025-12-01 05:56:42,546 - aiogram.event - INFO - Update id=409625650 is handled. Duration 3962 ms by bot id=8283774586
2025-12-01 05:57:02,400 - aiogram.event - INFO - Update id=409625651 is handled. Duration 3180 ms by bot id=8283774586
2025-12-01 05:57:13,637 - aiogram.event - INFO - Update id=409625652 is not handled. Duration 3 ms by bot id=8283774586
2025-12-01 05:57:13,637 - aiogram.event - ERROR - Cause exception while process update id=409625652 by bot id=8283774586
IntegrityError: NOT NULL constraint failed: events.event_ts
Traceback (most recent call last):
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 27, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/fsm/middleware.py", line 41, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 123, in _wrapped
    return await self._propagate_event(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 123, in _wrapped
    return await self._propagate_event(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/middlewares/admin.py", line 27, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/handlers/user.py", line 147, in process_description
    event_id = await db.add_event(event)
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/database/db.py", line 50, in add_event
    cursor = await db.execute("""
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiosqlite/core.py", line 190, in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiosqlite/core.py", line 133, in _execute
    return await future
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiosqlite/core.py", line 106, in run
    result = function()
sqlite3.IntegrityError: NOT NULL constraint failed: events.event_ts
2025-12-01 06:01:42,557 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-12-01 06:01:42,558 - aiogram.dispatcher - INFO - Polling stopped for bot @tiu_event_bot id=8283774586 - 'Event Orginizer'
2025-12-01 06:01:42,559 - aiogram.dispatcher - INFO - Polling stopped
2025-12-01 06:01:42,559 - __main__ - INFO - üõë Shutting down bot...
2025-12-01 06:01:42,559 - bot.services.scheduler - INFO - üõë Reminder scheduler stopped
2025-12-01 06:01:42,560 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-12-01 06:01:45,044 - __main__ - INFO - ‚úÖ Shutdown notification sent
2025-12-01 06:01:45,045 - __main__ - INFO - ‚úÖ Bot stopped successfully
2025-12-01 06:01:45,296 - __main__ - INFO - ‚úÖ Bot session closed
2025-12-01 06:01:50,401 - __main__ - INFO - ‚úÖ Configuration validated
2025-12-01 06:01:50,413 - __main__ - INFO - ‚úÖ Middlewares registered
2025-12-01 06:01:50,413 - __main__ - INFO - ‚úÖ Routers registered
2025-12-01 06:01:50,415 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 06:01:50,415 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 06:01:50,416 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 06:01:50,416 - apscheduler.scheduler - INFO - Added job "Send daily event digest to photographer" to job store "default"
2025-12-01 06:01:50,417 - apscheduler.scheduler - INFO - Added job "Send 24-hour event reminders" to job store "default"
2025-12-01 06:01:50,417 - apscheduler.scheduler - INFO - Added job "Send 1-hour event reminders" to job store "default"
2025-12-01 06:01:50,417 - apscheduler.scheduler - INFO - Scheduler started
2025-12-01 06:01:50,417 - bot.services.scheduler - INFO - ‚úÖ Reminder scheduler started successfully
2025-12-01 06:01:50,417 - __main__ - INFO - üîÑ Starting polling...
2025-12-01 06:01:50,418 - __main__ - INFO - üöÄ Starting University Event Bot...
2025-12-01 06:01:50,420 - __main__ - INFO - ‚úÖ Database initialized
2025-12-01 06:01:53,282 - __main__ - INFO - ‚úÖ Startup notification sent to photographer
2025-12-01 06:01:53,282 - __main__ - INFO - ‚úÖ Bot started successfully
2025-12-01 06:01:53,282 - aiogram.dispatcher - INFO - Start polling
2025-12-01 06:01:53,450 - aiogram.dispatcher - INFO - Run polling for bot @tiu_event_bot id=8283774586 - 'Event Orginizer'
2025-12-01 06:02:17,842 - aiogram.event - INFO - Update id=409625653 is handled. Duration 5189 ms by bot id=8283774586
2025-12-01 06:02:20,573 - aiogram.event - INFO - Update id=409625654 is handled. Duration 885 ms by bot id=8283774586
2025-12-01 06:02:30,863 - aiogram.event - INFO - Update id=409625655 is handled. Duration 1165 ms by bot id=8283774586
2025-12-01 06:02:43,419 - aiogram.event - INFO - Update id=409625656 is handled. Duration 820 ms by bot id=8283774586
2025-12-01 06:02:48,346 - aiogram.event - INFO - Update id=409625657 is handled. Duration 623 ms by bot id=8283774586
2025-12-01 06:02:59,597 - aiogram.event - INFO - Update id=409625658 is handled. Duration 396 ms by bot id=8283774586
2025-12-01 06:03:06,244 - aiogram.event - INFO - Update id=409625659 is not handled. Duration 3 ms by bot id=8283774586
2025-12-01 06:03:06,245 - aiogram.event - ERROR - Cause exception while process update id=409625659 by bot id=8283774586
IntegrityError: NOT NULL constraint failed: events.event_ts
Traceback (most recent call last):
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 27, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/fsm/middleware.py", line 41, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 123, in _wrapped
    return await self._propagate_event(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 123, in _wrapped
    return await self._propagate_event(
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/middlewares/admin.py", line 27, in __call__
    return await handler(event, data)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/handlers/user.py", line 147, in process_description
    event_id = await db.add_event(event)
  File "/home/nizomjon/PycharmProjects/university_event_bot/bot/database/db.py", line 50, in add_event
    cursor = await db.execute("""
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiosqlite/core.py", line 190, in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiosqlite/core.py", line 133, in _execute
    return await future
  File "/home/nizomjon/PycharmProjects/university_event_bot/.venv/lib/python3.9/site-packages/aiosqlite/core.py", line 106, in run
    result = function()
sqlite3.IntegrityError: NOT NULL constraint failed: events.event_ts
2025-12-01 06:04:15,288 - aiogram.dispatcher - WARNING - Received SIGINT signal
2025-12-01 06:04:15,289 - aiogram.dispatcher - INFO - Polling stopped for bot @tiu_event_bot id=8283774586 - 'Event Orginizer'
2025-12-01 06:04:15,289 - aiogram.dispatcher - INFO - Polling stopped
2025-12-01 06:04:15,289 - __main__ - INFO - üõë Shutting down bot...
2025-12-01 06:04:15,289 - bot.services.scheduler - INFO - üõë Reminder scheduler stopped
2025-12-01 06:04:15,290 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-12-01 06:04:17,600 - __main__ - INFO - ‚úÖ Shutdown notification sent
2025-12-01 06:04:17,600 - __main__ - INFO - ‚úÖ Bot stopped successfully
2025-12-01 06:04:17,852 - __main__ - INFO - ‚úÖ Bot session closed
2025-12-01 06:04:25,492 - __main__ - INFO - ‚úÖ Configuration validated
2025-12-01 06:04:25,503 - __main__ - INFO - ‚úÖ Middlewares registered
2025-12-01 06:04:25,504 - __main__ - INFO - ‚úÖ Routers registered
2025-12-01 06:04:25,506 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 06:04:25,506 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 06:04:25,506 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-12-01 06:04:25,507 - apscheduler.scheduler - INFO - Added job "Send daily event digest to photographer" to job store "default"
2025-12-01 06:04:25,507 - apscheduler.scheduler - INFO - Added job "Send 24-hour event reminders" to job store "default"
2025-12-01 06:04:25,507 - apscheduler.scheduler - INFO - Added job "Send 1-hour event reminders" to job store "default"
2025-12-01 06:04:25,507 - apscheduler.scheduler - INFO - Scheduler started
2025-12-01 06:04:25,507 - bot.services.scheduler - INFO - ‚úÖ Reminder scheduler started successfully
2025-12-01 06:04:25,507 - __main__ - INFO - üîÑ Starting polling...
2025-12-01 06:04:25,508 - __main__ - INFO - üöÄ Starting University Event Bot...
2025-12-01 06:04:25,523 - __main__ - INFO - ‚úÖ Database initialized
2025-12-01 06:04:28,247 - __main__ - INFO - ‚úÖ Startup notification sent to photographer
2025-12-01 06:04:28,247 - __main__ - INFO - ‚úÖ Bot started successfully
2025-12-01 06:04:28,247 - aiogram.dispatcher - INFO - Start polling
2025-12-01 06:04:28,613 - aiogram.dispatcher - INFO - Run polling for bot @tiu_event_bot id=8283774586 - 'Event Orginizer'
2025-12-01 06:04:43,461 - aiogram.event - INFO - Update id=409625660 is handled. Duration 1628 ms by bot id=8283774586
2025-12-01 06:04:45,828 - aiogram.event - INFO - Update id=409625661 is handled. Duration 1241 ms by bot id=8283774586
2025-12-01 06:04:51,778 - aiogram.event - INFO - Update id=409625662 is handled. Duration 1127 ms by bot id=8283774586
2025-12-01 06:05:03,679 - aiogram.event - INFO - Update id=409625663 is handled. Duration 1156 ms by bot id=8283774586
2025-12-01 06:05:07,760 - aiogram.event - INFO - Update id=409625664 is handled. Duration 1242 ms by bot id=8283774586
2025-12-01 06:05:20,848 - aiogram.event - INFO - Update id=409625665 is handled. Duration 2039 ms by bot id=8283774586
2025-12-01 06:05:26,995 - aiogram.event - INFO - Update id=409625666 is handled. Duration 286 ms by bot id=8283774586
2025-12-01 06:05:44,550 - aiogram.event - INFO - Update id=409625667 is handled. Duration 970 ms by bot id=8283774586
2025-12-01 06:05:50,301 - aiogram.event - INFO - Update id=409625668 is handled. Duration 1190 ms by bot id=8283774586
2025-12-01 06:05:58,432 - aiogram.event - INFO - Update id=409625669 is handled. Duration 2045 ms by bot id=8283774586
2025-12-01 06:06:01,766 - aiogram.event - INFO - Update id=409625670 is handled. Duration 1332 ms by bot id=8283774586
2025-12-01 06:16:15,881 - aiogram.event - INFO - Update id=409625671 is handled. Duration 2066 ms by bot id=8283774586
2025-12-01 06:17:12,090 - aiogram.event - INFO - Update id=409625672 is handled. Duration 721 ms by bot id=8283774586
2025-12-01 06:17:26,637 - aiogram.event - INFO - Update id=409625673 is handled. Duration 1731 ms by bot id=8283774586
2025-12-01 06:17:34,663 - aiogram.event - INFO - Update id=409625674 is handled. Duration 243 ms by bot id=8283774586
2025-12-01 06:17:37,800 - aiogram.event - INFO - Update id=409625675 is handled. Duration 814 ms by bot id=8283774586
2025-12-01 06:17:45,194 - aiogram.event - INFO - Update id=409625676 is handled. Duration 1321 ms by bot id=8283774586
2025-12-01 06:18:34,515 - aiogram.event - INFO - Update id=409625677 is handled. Duration 2464 ms by bot id=8283774586
2025-12-01 06:18:41,690 - aiogram.event - INFO - Update id=409625678 is handled. Duration 1143 ms by bot id=8283774586
2025-12-01 06:19:25,508 - apscheduler.executors.default - INFO - Running job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 06:34:25 EST)" (scheduled at 2025-12-01 06:19:25.506287-05:00)
2025-12-01 06:19:25,509 - bot.services.scheduler - INFO - üîç Checking for 1-hour reminders...
2025-12-01 06:19:25,511 - apscheduler.executors.default - INFO - Job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 06:34:25 EST)" executed successfully
2025-12-01 06:22:26,479 - aiogram.event - INFO - Update id=409625679 is handled. Duration 7762 ms by bot id=8283774586
2025-12-01 06:22:56,508 - aiogram.event - INFO - Update id=409625680 is handled. Duration 7101 ms by bot id=8283774586
2025-12-01 06:23:16,772 - aiogram.event - INFO - Update id=409625681 is handled. Duration 3483 ms by bot id=8283774586
2025-12-01 06:24:08,369 - aiogram.event - INFO - Update id=409625682 is handled. Duration 2601 ms by bot id=8283774586
2025-12-01 06:24:44,063 - aiogram.event - INFO - Update id=409625683 is handled. Duration 2034 ms by bot id=8283774586
2025-12-01 06:24:52,961 - aiogram.event - INFO - Update id=409625684 is handled. Duration 806 ms by bot id=8283774586
2025-12-01 06:25:36,156 - aiogram.event - INFO - Update id=409625685 is handled. Duration 1945 ms by bot id=8283774586
2025-12-01 06:25:46,518 - aiogram.event - INFO - Update id=409625686 is handled. Duration 315 ms by bot id=8283774586
2025-12-01 06:27:25,000 - aiogram.event - INFO - Update id=409625687 is handled. Duration 4429 ms by bot id=8283774586
2025-12-01 06:27:32,515 - aiogram.event - INFO - Update id=409625688 is handled. Duration 1196 ms by bot id=8283774586
2025-12-01 06:34:25,914 - apscheduler.executors.default - INFO - Running job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 06:49:25 EST)" (scheduled at 2025-12-01 06:34:25.506287-05:00)
2025-12-01 06:34:25,915 - bot.services.scheduler - INFO - üîç Checking for 1-hour reminders...
2025-12-01 06:34:25,918 - apscheduler.executors.default - INFO - Job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 06:49:25 EST)" executed successfully
2025-12-01 06:49:25,511 - apscheduler.executors.default - INFO - Running job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 07:04:25 EST)" (scheduled at 2025-12-01 06:49:25.506287-05:00)
2025-12-01 06:49:25,511 - bot.services.scheduler - INFO - üîç Checking for 1-hour reminders...
2025-12-01 06:49:25,513 - apscheduler.executors.default - INFO - Job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 07:04:25 EST)" executed successfully
2025-12-01 07:04:25,516 - apscheduler.executors.default - INFO - Running job "Send 24-hour event reminders (trigger: interval[1:00:00], next run at: 2025-12-01 08:04:25 EST)" (scheduled at 2025-12-01 07:04:25.506143-05:00)
2025-12-01 07:04:25,519 - bot.services.scheduler - INFO - üîç Checking for 24-hour reminders...
2025-12-01 07:04:25,520 - apscheduler.executors.default - INFO - Running job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 07:19:25 EST)" (scheduled at 2025-12-01 07:04:25.506287-05:00)
2025-12-01 07:04:25,520 - bot.services.scheduler - INFO - üîç Checking for 1-hour reminders...
2025-12-01 07:04:25,523 - apscheduler.executors.default - INFO - Job "Send 24-hour event reminders (trigger: interval[1:00:00], next run at: 2025-12-01 08:04:25 EST)" executed successfully
2025-12-01 07:04:25,523 - apscheduler.executors.default - INFO - Job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 07:19:25 EST)" executed successfully
2025-12-01 07:19:25,515 - apscheduler.executors.default - INFO - Running job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 07:34:25 EST)" (scheduled at 2025-12-01 07:19:25.506287-05:00)
2025-12-01 07:19:25,518 - bot.services.scheduler - INFO - üîç Checking for 1-hour reminders...
2025-12-01 07:19:25,520 - apscheduler.executors.default - INFO - Job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 07:34:25 EST)" executed successfully
2025-12-01 07:34:25,508 - apscheduler.executors.default - INFO - Running job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 07:49:25 EST)" (scheduled at 2025-12-01 07:34:25.506287-05:00)
2025-12-01 07:34:25,512 - bot.services.scheduler - INFO - üîç Checking for 1-hour reminders...
2025-12-01 07:34:25,514 - apscheduler.executors.default - INFO - Job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 07:49:25 EST)" executed successfully
2025-12-01 07:49:25,515 - apscheduler.executors.default - INFO - Running job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 08:04:25 EST)" (scheduled at 2025-12-01 07:49:25.506287-05:00)
2025-12-01 07:49:25,534 - bot.services.scheduler - INFO - üîç Checking for 1-hour reminders...
2025-12-01 07:49:25,536 - apscheduler.executors.default - INFO - Job "Send 1-hour event reminders (trigger: interval[0:15:00], next run at: 2025-12-01 08:04:25 EST)" executed successfully
